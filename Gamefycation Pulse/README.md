# ‚≠ê –†–µ–π—Ç–∏–Ω–≥ –∏ —Å–∏—Å—Ç–µ–º–∞ –ø—É–ª—å—Å–æ–≤

## üìä –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞

### `actionRating`
- –°–æ–±–∏—Ä–∞–µ—Ç **–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (`status = 10`).
- –ú–æ–∂–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ **–∫—É—Ä—Å—É** –∏/–∏–ª–∏ **–∫–ª–∞—Å—Å—É**.
- –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ `pulses` –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç **–ø–∞–≥–∏–Ω–∞—Ü–∏—é**.
- –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ `userId` —Å–Ω–∞—á–∞–ª–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –∏–º–µ–Ω–Ω–æ —ç—Ç–æ–≥–æ —É—á–µ–Ω–∏–∫–∞ —Å –µ–≥–æ:
  - –º–µ—Å—Ç–æ–º (`number`)
  - —Å—á—ë—Ç–æ–º (`score`)

üìÑ **–§–∞–π–ª:** `modules/v1/controllers/UserController.php` (—Å—Ç—Ä–æ–∫–∞ 1716)

---

### `actionStudentsRating`
- –§–æ—Ä–º–∏—Ä—É–µ—Ç **—Ç–∞–±–ª–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Ç–µ–π** —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∑–∞–∫–∞–∑–∞–º–∏.
- –¢–∞–∫–∂–µ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ `pulses` –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ—ë –º–µ—Å—Ç–æ/–æ—á–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- –ë–∞–ª–ª –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∞–¥—ë—Ç—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–ª–µ `position_rating` –º–æ–¥–µ–ª–∏ `User`.

üìÑ **–§–∞–π–ª—ã:**  
- `modules/v1/controllers/UserController.php` (—Å—Ç—Ä–æ–∫–∞ 1808)  
- `models/User.php` (—Å—Ç—Ä–æ–∫–∞ 115)

---

## ‚öôÔ∏è –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—É–ª—å—Å–æ–≤

### –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
–í—Å–µ —Ä–∞—Å—á—ë—Ç—ã –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ **`PulsesService`**:

- –ü—Ä–æ–ø–æ—Ä—Ü–∏—è –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `ceil()`.
- –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `user_pulses`.
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è `user.pulses` **–±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**.

üìÑ **–§–∞–π–ª:** `modules/v1/services/PulsesService.php`  
–ö–ª—é—á–µ–≤—ã–µ —É—á–∞—Å—Ç–∫–∏: —Å—Ç—Ä–æ–∫–∏ **25**, **59**, **76**, **84**, **92**, **100**

---

### –õ–æ–≥–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π
- –õ–æ–≥–∏ (`user_id`, `foreign_class`, `foreign_id`, `amount`) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `user_pulses`.  
- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–µ–π:

üìÑ `m251201_221739_create_user_pulses_table.php` (—Å—Ç—Ä–æ–∫–∞ 13)  
- –ú–æ–¥–µ–ª—å: `modules/v1/models/UserPulses.php`

---

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

#### üè† –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
- –ü—Ä–∏ –∞–≤—Ç–æ‚Äë –∏–ª–∏ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `calcPulsesForHomework`.
- –ú–∞–∫—Å–∏–º—É–º –±–µ—Ä—ë—Ç—Å—è –∏–∑ `TopicLesson->estimated_at`.
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç ‚Äî –¥–æ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ—à—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.
- –ü—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `addPulses`.

üìÑ  
- `modules/v1/controllers/HomeWorkController.php` (—Å—Ç—Ä–æ–∫–∞ 890)  
- `modules/v1/models/HomeWorkVerifyForm.php` (—Å—Ç—Ä–æ–∫–∞ 236)

#### üìò –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ, –ø—Ä–æ–±–Ω–∏–∫–∏ –∏ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã
- –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Äî **15 –ø—É–ª—å—Å–æ–≤**  
- –ü—Ä–æ–±–Ω–∏–∫ ‚Äî **20 –ø—É–ª—å—Å–æ–≤**  
- –ö–æ–Ω—Å–ø–µ–∫—Ç ‚Äî **15 –ø—É–ª—å—Å–æ–≤**

üìÑ  
- `modules/v1/models/ControlWorkVerifyForm.php` (—Å—Ç—Ä–æ–∫–∞ 211)  
- `modules/v1/models/ProbeWorkVerifyForm.php` (—Å—Ç—Ä–æ–∫–∞ 162)  
- `modules/v1/models/LessonAbstractVerifiedForm.php` (—Å—Ç—Ä–æ–∫–∞ 30)

#### üéüÔ∏è –ü–æ—Å–µ—â–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- `visited` ‚Üí **+3 –ø—É–ª—å—Å–∞**  
- `visited_plus` ‚Üí **+5 –ø—É–ª—å—Å–æ–≤**

üìÑ `modules/v1/models/JournalTimetableForm.php` (—Å—Ç—Ä–æ–∫–∞ 32)

---

## üïπÔ∏è –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è

–ü—É–ª—å—Å—ã ‚Äî —ç—Ç–æ **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è ‚Äú–≤–∞–ª—é—Ç–∞‚Äù –º–æ—Ç–∏–≤–∞—Ü–∏–∏**.

- –ù–∞—á–∏—Å–ª—è—é—Ç—Å—è –∑–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã: –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π, –ø–æ—Å–µ—â–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π.  
- –ü–æ–≤—ã—à–∞—é—Ç –æ–±—â–∏–π —Å—á—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–ª–∏—è—é—Ç –Ω–∞ –º–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ.  
- –ò—Å—Ç–æ—Ä–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `user_pulses` ‚Äî –º–æ–∂–Ω–æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—á–µ–Ω–∏–∫—É, –∑–∞ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–æ–ª—É—á–µ–Ω—ã –æ—á–∫–∏.

### –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
–§—Ä–æ–Ω—Ç‚Äë—ç–Ω–¥ –∏–ª–∏ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å:
- `foreign_class`
- `amount`  
—á—Ç–æ–±—ã –æ–±—ä—è—Å–Ω—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–∞–≥—Ä–∞–¥—ã.

---

## üß∞ –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

–î–ª—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –ø—É–ª—å—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

üìÑ `commands/DevController.php` (—Å—Ç—Ä–æ–∫–∞ 1080)

–ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏:
- –º–∏–≥—Ä–∞—Ü–∏—è—Ö,
- –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π,
- –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏.

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ **–∫—Ä–∏—Ç–µ—Ä–∏–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ø—É–ª—å—Å–æ–≤** –∏–ª–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤—ã–±–æ—Ä–∫–∏ –∏–∑ `user_pulses`  
(–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ø‚Äë10 –∑–∞ –Ω–µ–¥–µ–ª—é –∏–ª–∏ –∏—Å—Ç–æ—Ä–∏—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—á–µ–Ω–∏–∫–∞).
