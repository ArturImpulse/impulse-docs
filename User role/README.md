# üßë‚Äçüíª –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∏—Ö –ø—Ä–∞–≤–∞

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–í—Å–µ **–Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–ª—É—á–∞—é—Ç —Å—Ç–∞—Ç—É—Å:

```
STATUS = 10
```

**–¢–∞–±–ª–∏—Ü–∞:** `user`  
**–ö–æ–ª–æ–Ω–∫–∞:** `status`  
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `Database ‚Üí user (—Ç–∞–±–ª–∏—Ü–∞) ‚Üí status (–∫–æ–ª–æ–Ω–∫–∞)`

---

## –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í –º–æ–¥–µ–ª–∏ `User` –∂—ë—Å—Ç–∫–æ –∑–∞–¥–∞–Ω—ã —Ç—Ä–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–∞:

```php
const STATUS_ACTIVE   = 10;
const STATUS_INACTIVE = 9;
const STATUS_BLOCKED  = 0;
```

üìÑ **–§–∞–π–ª:** `models/User.php` (—Å—Ç—Ä–æ–∫–∞ 111)

| –°—Ç–∞—Ç—É—Å | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞          | –û–ø–∏—Å–∞–Ω–∏–µ                |
|:-------:|:-------------------|:------------------------|
| `10` | `STATUS_ACTIVE`   | –ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å   |
| `9`  | `STATUS_INACTIVE` | –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| `0`  | `STATUS_BLOCKED`  | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π         |

---

## –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

–¢–∞–±–ª–∏—Ü–∞ `user` —Å–æ–∑–¥–∞—ë—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–µ–π:

üìÑ `migrations/m220324_041743_create_user_table.php`

–í –Ω–µ–π —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ `status` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `10`.

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è: **line 15**
- –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: **line 21**

–ú–æ–¥–µ–ª—å `User` –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–æ –ø–æ–ª–µ –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π  
üìÑ `models/User.php` (—Å—Ç—Ä–æ–∫–∞ 111)

---

## –ü—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (RBAC)

–ü—Ä–∞–≤–∞ –∏ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π **RBAC-—Å–∏—Å—Ç–µ–º–æ–π Yii2**.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ú–æ–¥–µ–ª—å | –°—Ç—Ä–æ–∫–∞ |
|:---------|:------------|:---------|:---------|
| `auth_assignment` | –ù–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º | `models/AuthAssignment.php` | 17, 22 |
| `auth_item` | –°–∞–º–∏ —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ | `models/AuthItem.php` | 27 |
| `auth_item_child` | –ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–æ–ª–µ–π | ‚Äî | ‚Äî |

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

–í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è **–≤–º–µ—Å—Ç–µ —Å –∏—Ö —Ä–æ–ª—è–º–∏** —á–µ—Ä–µ–∑ `JOIN` —Å —Ç–∞–±–ª–∏—Ü–µ–π `auth_assignment`.  
–≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RBAC-—Å–∏—Å—Ç–µ–º—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏.

üìÑ `modules/v1/controllers/UserController.php` (—Å—Ç—Ä–æ–∫–∞ 2713)

---

## –ü—Ä–∏–º–µ—Ä SQL-–∑–∞–ø—Ä–æ—Å–∞

–ü—Ä–∏–º–µ—Ä, –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏—Ö —Ä–æ–ª—è–º–∏:

```sql
SELECT 
    u.id,
    u.username,
    u.status,
    a.item_name AS role
FROM user u
LEFT JOIN auth_assignment a ON a.user_id = u.id;
```

---

## –†–µ–∑—é–º–µ

- –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º **10 (–∞–∫—Ç–∏–≤–Ω—ã–π)**.  
- –¢—Ä–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `User.php`.  
- –ü—Ä–∞–≤–∞ –∏ —Ä–æ–ª–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ **RBAC-—Ç–∞–±–ª–∏—Ü—ã** (`auth_*`).  
- –í –∫–æ–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ `user` –∏ `auth_assignment` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–æ–ª–µ–π.
